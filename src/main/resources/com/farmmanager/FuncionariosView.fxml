<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.SplitPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>
<?import javafx.geometry.Insets?>

<!-- 
  Tela de Gestão de Funcionários
  ATUALIZADO:
  - Adicionado botão "Lançar Pagamento".
  - Adicionada coluna "Data de Início".
  - ADICIONADAS COLUNAS CPF, Telefone, Endereço.
  - ATUALIZADO: Botão de pagamento dividido em "Lançar Salário" e "Lançar Outro Pagamento".
  - ATUALIZADO: Convertido para SplitPane com painel de detalhes (histórico de pagamento).
  - ATUALIZADO: Adicionado botão de exportar CSV no painel de detalhes.
-->
<VBox spacing="15.0" xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.farmmanager.controller.FuncionariosController">
   <children>
      <Label styleClass="content-title" text="Gestão de Funcionários" />
      
      <!-- Divisão da tela entre Lista e Detalhes -->
      <SplitPane fx:id="splitPane" dividerPositions="0.65" VBox.vgrow="ALWAYS">
         <items>
            <!-- Painel Esquerdo (Lista de Funcionários) -->
            <VBox spacing="10.0">
               <children>
                  <!-- Toolbar com botões ATUALIZADA -->
                  <HBox styleClass="module-toolbar">
                     <children>
                        <Button mnemonicParsing="false" onAction="#handleAdicionar" styleClass="module-button" text="+ Adicionar Funcionário" />
                        <!-- BOTAO DE PAGAMENTO PADRÃO -->
                        <Button fx:id="btnPagarSalario" mnemonicParsing="false" onAction="#handlePagarSalarioPadrao" styleClass="module-button, success" text="Lançar Salário (Padrão)" />
                        <!-- NOVO BOTAO DE OUTRO PAGAMENTO -->
                        <Button fx:id="btnLancarOutroPagamento" mnemonicParsing="false" onAction="#handleLancarOutroPagamento" styleClass="module-button, warning" text="Lançar Outro Pagamento" />
                        <Button mnemonicParsing="false" onAction="#handleRemover" styleClass="module-button, danger" text="- Remover Selecionado" />
                     </children>
                  </HBox>
                  
                  <!-- Tabela de Funcionários ATUALIZADA -->
                  <TableView fx:id="tabelaFuncionarios" VBox.vgrow="ALWAYS">
                     <columns>
                        <TableColumn fx:id="colFuncId" prefWidth="50.0" text="ID" />
                        <TableColumn fx:id="colFuncNome" prefWidth="200.0" text="Nome" />
                        <TableColumn fx:id="colFuncCargo" prefWidth="120.0" text="Cargo" />
                        <TableColumn fx:id="colFuncSalario" prefWidth="100.0" text="Salário (R$)" />
                        <TableColumn fx:id="colFuncDataInicio" prefWidth="100.0" text="Data de Início" />
                        <TableColumn fx:id="colFuncCpf" prefWidth="100.0" text="CPF" />
                        <TableColumn fx:id="colFuncTelefone" prefWidth="100.0" text="Telefone" />
                        <TableColumn fx:id="colFuncEndereco" prefWidth="150.0" text="Endereço" />
                     </columns>
                  </TableView>
               </children>
            </VBox>
            
            <!-- NOVO: Painel Direito (Detalhes e Histórico de Pagamento) -->
            <VBox styleClass="card" spacing="10.0">
               <children>
                  <Label fx:id="lblDetalhesTitulo" styleClass="card-title" text="Detalhes: (Selecione um funcionário)" />
                  <Label text="Histórico de Pagamentos" />
                  <TableView fx:id="tabelaPagamentos" VBox.vgrow="ALWAYS">
                     <columns>
                        <TableColumn fx:id="colPagData" prefWidth="120.0" text="Data" />
                        <TableColumn fx:id="colPagDesc" prefWidth="250.0" text="Descrição" />
                        <TableColumn fx:id="colPagSaida" prefWidth="120.0" text="Valor (R$)" />
                     </columns>
                  </TableView>
                  <Label fx:id="lblTotalPagamentos" style="-fx-font-weight: bold; -fx-font-size: 14px; -fx-text-fill: #D32F2F;" text="Total Pago: R$ 0,00" />
                  
                  <!-- NOVO BOTÃO DE EXPORTAR -->
                  <HBox alignment="CENTER_RIGHT" style="-fx-padding-top: 10px;">
                     <children>
                        <Button fx:id="btnExportarCsv" mnemonicParsing="false" onAction="#handleExportarCsv" styleClass="module-button, success" text="Exportar Relatório (CSV)" />
                     </children>
                  </HBox>
                          
               </children>
            </VBox>
         </items>
      </SplitPane>
   </children>
</VBox>
